<?xml version="1.0" encoding="UTF-8"?>

<!-- 
     File di configurazione per il rilascio di ePTId e ePSA a tutti e per il rilascio dei soli attributi REQUIRED agli SP di Test di IDEM -->

<AttributeFilterPolicyGroup id="ShibbolethFilterPolicy"
                            xmlns="urn:mace:shibboleth:2.0:afp"
                            xmlns:saml="urn:mace:shibboleth:2.0:afp:mf:saml"
                            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                            xmlns:afp="urn:mace:shibboleth:2.0:afp"
                            xsi:schemaLocation="urn:mace:shibboleth:2.0:afp classpath:/schema/shibboleth-2.0-afp.xsd
                                                urn:mace:shibboleth:2.0:afp:mf:basic classpath:/schema/shibboleth-2.0-afp-mf-basic.xsd
                                                urn:mace:shibboleth:2.0:afp:mf:saml classpath:/schema/shibboleth-2.0-afp-mf-saml.xsd">
    
    <!--  Release the transient ID to anyone -->
    <AttributeFilterPolicy id="releaseTransientIdToAnyone">
        <PolicyRequirementRule xsi:type="ANY" />
        
        <AttributeRule attributeID="transientId">
            <PermitValueRule xsi:type="ANY" />
        </AttributeRule>
        
    </AttributeFilterPolicy>
    
    
    <!--  Release ePTId and ePSA to anyone -->
    
    <AttributeFilterPolicy id="attributesToAnyone">
        <PolicyRequirementRule xsi:type="ANY" />
        
        <AttributeRule attributeID="eduPersonTargetedID"><PermitValueRule xsi:type="ANY" /></AttributeRule>
        <AttributeRule attributeID="eduPersonScopedAffiliation"><PermitValueRule xsi:type="ANY" /></AttributeRule>
        
    </AttributeFilterPolicy>
    
    <!-- IDEM SP 2.4 di Test -->
    <AttributeFilterPolicy id="IDEMsp24-test">
        <PolicyRequirementRule xsi:type="Requester" value="https://sp24-test.garr.it/shibboleth" />
        
        <AttributeRule attributeID="uid"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="surname"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="givenName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="commonName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="displayName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacDateOfBirth"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacYearOfBirth"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacPlaceOfBirth"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacPersonalUniqueID"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacPersonalPosition"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacPersonalTitle"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacUserPresenceID"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacHomeOrganization"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacHomeOrganizationType"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacMotherTongue"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="street"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="houseIdentifier"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="locality"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="preferredLanguage"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="postalCode"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="stateProvince"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="countryName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="friendlyCountryName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="email"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="telephoneNumber"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="facsimileTelephoneNumber"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="mobile"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="organizationalUnit"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="organizationName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="eduPersonOrgDN"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="eduPersonOrgUnitDN"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="eduPersonPrincipalName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="eduPersonEntitlement"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="title"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
     </AttributeFilterPolicy>

    <!-- IDEM SP di Test -->
    <AttributeFilterPolicy id="IDEMsp-test">
        <PolicyRequirementRule xsi:type="Requester" value="https://sp-test.garr.it/shibboleth" />

        <AttributeRule attributeID="uid"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="surname"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="givenName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="commonName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="displayName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacDateOfBirth"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacYearOfBirth"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacPlaceOfBirth"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacPersonalUniqueID"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacPersonalPosition"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacPersonalTitle"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacUserPresenceID"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacHomeOrganization"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacHomeOrganizationType"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="schacMotherTongue"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="street"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="houseIdentifier"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="locality"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="preferredLanguage"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="postalCode"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="stateProvince"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="countryName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="friendlyCountryName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="email"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="telephoneNumber"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="facsimileTelephoneNumber"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="mobile"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="organizationalUnit"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="organizationName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="eduPersonOrgDN"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="eduPersonOrgUnitDN"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="eduPersonPrincipalName"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="eduPersonEntitlement"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
        <AttributeRule attributeID="title"><afp:PermitValueRule xsi:type="ANY"/></AttributeRule>
    </AttributeFilterPolicy>

    <!-- IDEM Entity Registry -->
    <AttributeFilterPolicy id="IDEMRegistry">
        <PolicyRequirementRule xsi:type="Requester" value="https://registry.idem.garr.it/shibboleth" />
        
        <AttributeRule attributeID="eduPersonPrincipalName"><PermitValueRule xsi:type="ANY" /></AttributeRule>
        <AttributeRule attributeID="email"><PermitValueRule xsi:type="ANY" /></AttributeRule>
        <AttributeRule attributeID="givenName"><PermitValueRule xsi:type="ANY" /></AttributeRule>
        <AttributeRule attributeID="surname"><PermitValueRule xsi:type="ANY" /></AttributeRule>
    </AttributeFilterPolicy>

</AttributeFilterPolicyGroup>
