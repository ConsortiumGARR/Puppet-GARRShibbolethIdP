#!/bin/sh
MYSQLBK=mysql-$( date +%y%m%d-%H%M ).sql
BACKUPDIR=/opt/mysql-backups

if [ ! -d $BACKUPDIR ]; then
  mkdir $BACKUPDIR
fi

mysqldump --all-databases > $BACKUPDIR/$MYSQLBK
gzip -9 $BACKUPDIR/$MYSQLBK

find $BACKUPDIR -type f -mtime +30 -exec rm {} \;